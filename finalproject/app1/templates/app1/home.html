{% load static tailwind_tags %}
{%load static %}


<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" type="image/x-icon" href="{%static 'img/logo-color.png'%}" >

        <link href="https://fonts.gstatic.com" rel="preconnect">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i 500,500i,600,600i,700,700i" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <title>CH Connect - HomePage</title>
        
        {% tailwind_css %}
        <link rel="stylesheet" href="{%static 'css/dist/custom-style.css' %}">
    </head>
    <body class="bg-[#F3F5F7]">

    <div class="none:container relative">

      <div class="sidebar fixed top-24 left-0  flex flex-col justify-between items-center m-4 w-[84px] h-[480px] bg-white rounded-2xl shadow-2xl shadow-gray-400">
          <a href="{% url 'home'%}" class="group relative bg-[#a7e0bc] hover:bg-[#63cc89] p-3 mt-2 rounded-lg shadow-lg "><img class="h-10 w-10" src="{%static 'img/home.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Home</p>
          </a>
          <a href="{% url 'profiles:myProfile' %}" class="group relative bg-gray-400 hover:bg-[#63cc89] p-3 rounded-lg"><img class="h-10 w-10" src="{%static 'img/profile.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Profile</p>
          </a>
          <a href="/messenger" class="group relative bg-gray-400 hover:bg-[#63cc89] p-3  rounded-lg"><img class="h-10 w-10" src="{%static 'img/chat.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Messages</p>
          </a>
          <a href="{% url 'profiles:profile-list-view' %}" class="group relative bg-gray-400 hover:bg-[#63cc89] p-3  rounded-lg"><img class="h-10 w-10" src="{%static 'img/friends.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Find Freinds</p>
          </a>
          <a href="#" class="group relative bg-gray-400 hover:bg-[#63cc89] p-3 mb-2 rounded-lg"><img class="h-10 w-10" src="{%static 'img/settings.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Settings</p>
          </a>

      </div>  

      <div class="main">
          <!---------navbar-------- -->
          <div class="z-10 fixed top-0 w-full navbar h-20 flex flex-row flex-none items-center  bg-white rounded-t-lg">
              <div class="logo-section w-100 px-5 ">
                  <a href="{% url 'home'%}"><img src="{%static 'img/logo.png'%}" alt="logo" class="h-[54px]"></a>
              </div>

              <div class="middle-section flex-1 flex flex-shrink-0 justify-center">
                  <div class=" relative mx-auto text-gray-600">
                      <input class="border-2 border-gray-300 bg-[#F3F5F7] h-10 w-[500px]  pr-16 rounded-full py-2 px-4 text-sm focus:border-[#0e9741]" type="search" name="search" placeholder="Search">
                      <button type="submit" class="absolute right-0 top-3 mr-5" >
                          <svg class="text-gray-600 h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg"
                              xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px"
                              viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve"
                              width="512px" height="512px">
                              <path
                              d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z" />
                          </svg>
                      </button>
                  </div>
              </div>
              <div class="profile-area w-100 flex pr-[80px]">
                  <button class="w-10 h-10 rounded-full bg-[#F3F5F7] hover:bg-[#a3b5c8] text-white flex justify-center items-center">
                      <img src="{%static 'img/chat.png'%}" alt="logo" class="h-5 w-5">
                  </button>   
                  <button class="w-10 h-10 rounded-full flex justify-center items-center bg-[#F3F5F7] hover:bg-[#a3b5c8] text-white mx-5">
                      <img src="{%static 'img/bell.png'%}" alt="logo" class="h-5 w-5">
                  </button>
                
                  <div class="relative">
                      <img class="w-10 h-10 rounded-full" src="{{profile.avatar.url}}" alt="">
                      <span class="top-0 left-7 absolute  w-3.5 h-3.5 bg-green-400 border-2 border-[#a3b5c8] dark:border-gray-800 rounded-full"></span>
                      <div class="expand-more ">
                        <span class=" bg-[#e2e6ea] flex justify-center items-center bottom-[-5px] right-[-2px] absolute material-icons-sharp w-3.5 h-3.5 border-red-900 dark:border-gray-800 rounded-full">expand_more</span>
                        <ul class="expand-more-items">
                            <li><a href="#">settings</a></li>
                            <li><a href="accounts/logout/">logout</a></li>
                        </ul>
                    </div>
                  </div>
              </div>
          </div>

          <!-- --------whats on your mind----- -->
          <div class="z-0 relative w-[620px] mx-auto my-7 mt-[100px] bg-white shadow-lg shadow-gray-400 rounded-2xl p-4">
            <div class="posted_message hidden absolute top-[70%] left-[35%] text-center bg-green-400 shadow-lg shadow-gray-400 rounded-2xl p-4" ></div>
            <form method="POST" enctype="multipart/form-data" class="post_form">
              {% csrf_token %} 
              <div class="flex items-start">
                {% comment %} {{logged_in_userPost.user_id.first_name}} {% endcomment %}

                <img src="{{profile.avatar.url}}" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
                <textarea name="status_content" placeholder="What's on your mind?" class=" border-2 border-gray-300 w-full outline-none resize-none focus:border-[#0e9741] rounded-lg" rows="3"></textarea>
              </div>
              <div class="flex justify-end mt-4">
                <input type="file" name="postImage" id="img-upload"/>
                <span class="custom-img-upload flex text-gray-500 px-4 py-2 mx-4 rounded-md hover:text-[#a8d4b8]">
                  <span class="material-symbols-outlined mx-1 text-[#0a8136]">photo_library</span>Upload Photo
                </span>
                <button type="submit" class="bg-[#0a8136] text-white px-4 py-0 rounded-md hover:bg-[#a8d4b8]">Post</button>
              </div>

            </form>

          </div>

          <!-- ---------post-------- -->
          {% for post in post_comment_list %}
          {% comment %} {% for post in posts %} {% endcomment %}
            <div id="default_posts" class="default_posts w-[620px] mx-auto mb-10 bg-white shadow-2xl shadow-gray-800 rounded-2xl p-4">
              <div class="flex justify-between">
                <div class="flex items-start">
                  <img src="{{post.profile_avatar}}" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
                  <div>
                    <h4 class="font-semibold">{{post.user_firstname}}  {{post.user_lastname}}</h4>
                    <p class="text-gray-500 text-sm">{{post.created_at}}</p>
                  </div>
                </div>
                <span class="material-symbols-outlined mr-2">more_horiz</span>
              </div>
              <div class="mt-4 border-b border-gray-300">
                <p>
                  {{post.content}}
                </p>
                {% if post.post_img != None %}
                  <img src="{{post.post_img}}" alt="Post Image" class="mt-4"> 
                    
                {% endif %}
              </div>
              <div class="flex items-center mt-4">
                <button class="flex items-center text-gray-500 hover:text-blue-500">
                  <span class="material-symbols-outlined text-red-500">favorite</span>
                  Like
                </button>
                <button id="comment" class="flex items-center text-gray-500 hover:text-blue-500 ml-8">
                  <span class="material-symbols-outlined text-green-500">comment</span>
                  Comment
                </button>
                
              </div>
          
              <div class="default_comment comment_section hidden rounded-2xl w-full mt-2 p-5 shadow-lg  border-t border-gray-300">
                <div class="flex flex-col font-normal text-[15px]">
                  {% comment %} {%for comment in post.comment%}
                  <label class="my-2 p-2 border-b-2 border-gray-300 rounded-l drop-shadow-2xl shadow-lg ">{{comment}}</label>
                  <img class="w-6 h-6 mx-2 rounded-full" src="{{profile.avatar.url}}" alt="">
                  {%endfor%}  {% endcomment %}

                  {% comment %} {% for content in post.user_comment.commented_user_img  %} {% endcomment %}
                    {% comment %} {% for content in comment.content %} {% endcomment %}
                    {% comment %} {{content}} {% endcomment %}
                    {% comment %} {% for c in content %} {% endcomment %}
                    {% comment %} <label class="my-2 p-2 border-b-2 border-gray-300 rounded-l drop-shadow-2xl shadow-lg ">aaaaa{{content}}</label> {% endcomment %}
                    {% comment %} <img class="w-6 h-6 mx-2 rounded-full" src="{{profile.avatar.url}}" alt=""> {% endcomment %}
                    {% comment %} {%endfor%} {% endcomment %}
                    {% comment %} {%endfor%} {% endcomment %}
                  {% comment %} {%endfor%} {% endcomment %}

                  {% for comment, commented_user in post.comments %}
                    <div class="flex items-center w-full mr-5">
                        <label class=" w-full my-2 p-2 border-b-2 border-gray-300 rounded-l drop-shadow-2xl shadow-lg ">{{comment}}</label>
                        <img class="w-10 h-10 mx-2 rounded-full shadow-lg shadow-blue-200" src="{{commented_user}}" alt="">
                    </div>
                  {% endfor %}
                            

                  <form method="POST" action="" class="comment_submit">
                    {%csrf_token%}
                    <div class="relative border-2 border-gray-300 w-full p-2 outline-none resize-none focus:border-[#0e9741] rounded-lg">
                      <img class="absolute left-0 top-2 w-10 h-10 mx-2 rounded-full" src="{{profile.avatar.url}}" alt="">
                      <input name="post_id" hidden value="{{post.id}}" class=""></input>
                      <input name="comment" placeholder="Write a comment..." class="ml-10 w-96 p-2 outline-none resize-none focus:border-[#0e9741] rounded-lg"></input>
                      <button type="submit" class="absolute right-3 top-2  bg-[#5185a1] text-white px-3 py-2 rounded-md hover:bg-[#a8d4b8]">Comment</button>
                    </div>
                  </form>

                </div>
  
              </div>

            </div>
          {%endfor%} 
          
           <!--------ajax updated fetched post data---------->
          <div class="updated_posts hidden">
          </div> 

          <div class="z-0  active-statuss fixed top-40 right-0 w-[292px] m-4 rounded-2xl shadow-lg shadow-gray-400 bg-blue-500">
            <div class="bg-white shadow rounded-lg p-4">
              <div class="flex items-center mb-4">
                <h4 class="font-semibold text-lg">Active Now</h4>
                <span class="ml-2 bg-green-500 rounded-full w-3 h-3"></span>
              </div>
              
                <img src="{% static 'img/me.jpg' %}" alt="User 1" class="w-8 h-8 rounded-full">
                <img src="{% static 'img/me.jpg' %}" alt="User 2" class="w-8 h-8 rounded-full">
                <img src="{% static 'img/me.jpg' %}" alt="User 3" class="w-8 h-8 rounded-full">
                <img src="{% static 'img/me.jpg' %}" alt="User 4" class="w-8 h-8 rounded-full">
                <img src="{% static 'img/me.jpg' %}" alt="User 5" class="w-8 h-8 rounded-full">
                <img src="{% static 'img/me.jpg' %}" alt="User 6" class="w-8 h-8 rounded-full">
                <img src="{% static 'img/me.jpg' %}" alt="User 7" class="w-8 h-8 rounded-full">
                <img src="{% static 'img/me.jpg' %}" alt="User 8" class="w-8 h-8 rounded-full">
            </div>
          </div>


          
      </div>
    </div>

    


    
    <!-- Link to js -->


    <script>
      var csrftoken_var ='{{ csrf_token }}'
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="{%static 'js/main.js' %}"></script>
    </body>
</html>
