{% load static tailwind_tags %}
{%load static %}


<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" type="image/x-icon" href="{%static 'img/logo-color.png'%}" >

        <link href="https://fonts.gstatic.com" rel="preconnect">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i 500,500i,600,600i,700,700i" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <title>CH Connect - Profile</title>
        
        {% tailwind_css %}
        <link rel="stylesheet" href="{%static 'css/dist/custom-style.css' %}">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
    <body class="bg-[#F3F5F7]">

    <div class="none:container relative">

      <div class="sidebar fixed top-24 left-0  flex flex-col justify-between items-center m-4 w-[84px] h-[480px] bg-white rounded-2xl shadow-2xl shadow-gray-400">
          <a href="{% url 'home'%}" class="group relative  bg-gray-400 hover:bg-[#63cc89] p-3 mt-2 rounded-lg shadow-lg "><img class="h-10 w-10" src="{%static 'img/home.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Home</p>
          </a>
          <a href="{% url 'profiles:myProfile' %}" class="group relative bg-[#a7e0bc] hover:bg-[#63cc89] p-3 mt-2 rounded-lg"><img class="h-10 w-10" src="{%static 'img/profile.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Profile</p>
          </a>
          <a href="/messenger" class="group relative bg-gray-400 hover:bg-[#63cc89] p-3 mt-2 rounded-lg"><img class="h-10 w-10" src="{%static 'img/chat.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Messages</p>
          </a>
          <a href="{% url 'profiles:profile-list-view' %}" class="group relative bg-gray-400 hover:bg-[#63cc89] p-3 mt-2 rounded-lg"><img class="h-10 w-10" src="{%static 'img/friends.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Find Freinds</p>
          </a>
          <a href="#" class="group relative bg-gray-400 hover:bg-[#63cc89] p-3 mb-2 rounded-lg"><img class="h-10 w-10" src="{%static 'img/settings.svg' %}" alt="">
            <p class="hidden group-hover:block absolute bottom-0 right-[-3rem] bg-[#a7e0bc] p-1 rounded-lg">Settings</p>
          </a>

      </div>  

        <div class="main">
            
            <!-- <-------navbar----- -->
            <div class="z-10 fixed top-0 w-full h-20 flex flex-row flex-none items-center justify-between bg-white rounded-t-lg">
              <div class="logo-section w-100 px-5 ">
                  <a href="{% url 'home'%}"><img src="{%static 'img/logo.png'%}" alt="logo" class="h-[54px]"></a>
              </div>
              
              <div class="middle-section flex-1 flex flex-shrink-0 justify-center">
                  <div class=" relative mx-auto text-gray-600">
                      <input class="border-2 border-gray-300 bg-[#F3F5F7] h-10 w-[500px]  pr-16 rounded-full py-2 px-4 text-sm focus:border-[#0e9741]" type="search" name="search" placeholder="Search">
                      <button type="submit" class="absolute right-0 top-3 mr-5" >
                          <svg class="text-gray-600 h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg"
                              xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px"
                              viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve"
                              width="512px" height="512px">
                              <path
                              d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z" />
                          </svg>
                      </button>
                  </div>
              </div>
              <div class="profile-area w-100 flex pr-[80px] justify-center">
                  <button class="w-10 h-10 rounded-full bg-[#F3F5F7] hover:bg-[#a3b5c8] text-white flex justify-center items-center">
                      <img src="{%static 'img/chat.png'%}" alt="logo" class="h-5 w-5">
                  </button>   
                  <button class="w-10 h-10 rounded-full flex justify-center items-center bg-[#F3F5F7] hover:bg-[#a3b5c8] text-white mx-5">
                      <img src="{%static 'img/bell.png'%}" alt="logo" class="h-5 w-5">
                  </button>
                
                  <div class="relative">
                      <img class="w-10 h-10 rounded-full" src="{{request.user.profile.avatar.url}}" alt="">
                      <span class="top-0 left-7 absolute  w-3.5 h-3.5 bg-green-400 border-2 border-[#a3b5c8] dark:border-gray-800 rounded-full"></span>
                      <div class="expand-more ">
                        <span class=" bg-[#e2e6ea] flex justify-center items-center bottom-[-5px] right-[-2px] absolute material-icons-sharp w-3.5 h-3.5 border-red-900 dark:border-gray-800 rounded-full">expand_more</span>
                        <ul class="expand-more-items">
                            <li><a href="#">settings</a></li>
                            <li><a href="accounts/logout/">logout</a></li>
                        </ul>
                    </div>
                  </div>
              </div>
            </div>

     

            <!-- ----------profile Dataa------ -->
            <div class=" w-[1020px] mx-auto my-7 mt-[100px] bg-white shadow-lg shadow-gray-400 rounded-2xl p-4">
               
                <div>
                    <div class="w-full h-[250px]">
                        <img src="{%static 'img/logo-white.png'%}" class="object-cover w-full h-full rounded-tl-lg rounded-tr-lg">
                    </div>
                    <div class="flex flex-col items-center -mt-20">
                        <img src="{{obj.avatar.url}}" class="w-40  h-40 border-4 border-[#369273] rounded-full">
                        <div class="flex items-center space-x-2 mt-2">
                            <p class="text-2xl">{{obj.first_name}} {{obj.last_name}}</p>
                        </div>
                        <p class="text-gray-700">Software Engineer at Google</p>
                        <p class="text-sm text-gray-500">Kathmandu, Nepal</p>
                    </div>
               
                </div>
                {% if messages %}
                <ul class="messages m-1 w-40 mx-auto text-center bg-green-400 shadow-lg shadow-gray-400 rounded-2xl p-1">
                    {% for message in messages %}
                        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
                <!-- profile overview tab model -->
                <section class="section profile mt-10">
                    <div class="row">
                        <div class="col-xl-12">
              
                            <div class="card">
                                <div class="card-body pt-3">
                                    <ul class="nav nav-tabs nav-tabs-bordered">
                    
                                        <li class="nav-item font-bold">
                                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Overview</button>
                                        </li>
                        
                                        <li class="nav-item  font-bold">
                                            <button class="nav-link text-[#369273]" data-bs-toggle="tab" data-bs-target="#profile-edit">Edit Profile</button>
                                        </li>
                                        <!-- <li class="nav-item">
                                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-change-password">Change Password</button>
                                        </li> -->                                                        
                                    </ul>
                                    
                                    <div class="tab-content pt-2">
                                    <!---- ----profile details------------- -->
                                        <div class="tab-pane fade show active profile-overview" id="profile-overview">
                                            <h5 class="card-title">Bio</h5>
                                            <p class="small fst-italic">{{obj.bio_info}}</p>
                        
                                            <h5 class="card-title">Profile Details</h5>
                        
                                            <div class="row p-2">
                                                <div class="col-lg-3 col-md-4 label font-bold w-24">Full Name</div>
                                                <div class="col-lg-9 col-md-8 text-gray-600">{{obj.first_name}} {{obj.last_name}}</div>
                                            </div>
                        
                                            <div class="row p-2">
                                                <div class="col-lg-3 col-md-4 label font-bold w-24">Email</div>
                                                <div class="col-lg-9 col-md-8 text-gray-600">{{obj.email}}</div>
                                            </div>
                        
                                            <div class="row p-2">
                                                <div class="col-lg-3 col-md-4 label font-bold w-24">Gender</div>
                                                <div class="col-lg-9 col-md-8 text-gray-600">{{obj.gender}}</div>
                                            </div>
                        
                                            <div class="row p-2">
                                                <div class="col-lg-3 col-md-4 label font-bold w-24">Friends Number</div>
                                                <div class="col-lg-9 col-md-8 text-gray-600">{{obj.get_friends_no}}</div>
                                            </div>

                                            {% comment %} <div class="row p-2">
                                                <div class="col-lg-3 col-md-4 label font-bold w-24">Friends</div>
                                                {%if obj.get_friends_no != 0 %}
                                                
                                                <div class="col-lg-3 col-md-4 flex flex-col">
                                                    {% for friend in obj.get_friends %}
                                                        <div class=" p-0 container text-gray-600 ">{{friend.profile.avatar.url}}</div>
                                                    {% endfor %}
                                                </div>

                                                {%else%}   
                                                    <div class="col-lg-9 col-md-8 text-gray-600">{{obj.get_friends_no}}</div>
                                                {%endif%}
                                            </div> {% endcomment %}
                                        
                                        </div>
                                        
                                        <!-- -------profile EDIT-------------- -->
                                        <div class="tab-pane fade profile-edit pt-3" id="profile-edit">
                        
                                            <!-- Profile Edit Form -->
                                            <form method='POST' action="{% url 'profiles:editProfile' pk=obj.id %}" enctype="multipart/form-data">
                                                {% csrf_token %} 
                                                <div class="row mb-3">
                                                    <label for="profileImage" class="font-bold col-md-4 col-lg-3 col-form-label">Profile Image</label>
                                                    <div class="col-md-8 col-lg-9">
                                                        <img  class="mb-2 w-40 h-40 border-4 border-[#369273] rounded-2xl" src="{{obj.avatar.url}}" alt="Profile">
                                                        <input name="avatar" type="file" class="form-control" id="fullName" value="{{obj.avatar.url}}">
                                                    </div>
                                                </div>
                            
                                                <div class="row mb-3">
                                                    <label for="fullName" class="font-bold col-md-4 col-lg-3 col-form-label">First Name</label>
                                                    <div class="col-md-8 col-lg-9">
                                                        <input name="first_name" type="text" class="form-control" id="fullName" value="{{obj.first_name}}">
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label for="fullName" class="font-bold col-md-4 col-lg-3 col-form-label">Last Name</label>
                                                    <div class="col-md-8 col-lg-9">
                                                        <input name="last_name" type="text" class="form-control" id="fullName" value="{{obj.last_name}}">
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label for="fullName" class="font-bold col-md-4 col-lg-3 col-form-label">Bio</label>
                                                    <div class="col-md-8 col-lg-9">
                                                        <input name="bio_info" type="text" class="form-control" id="fullName" value="{{obj.bio_info}}">
                                                    </div>
                                                </div>                                                                                    
                            
                                                <div class="row mb-3">
                                                    <label for="Email" class="font-bold col-md-4 col-lg-3 col-form-label">Email</label>
                                                    <div class="col-md-8 col-lg-9">
                                                        <input name="email" type="email" class="form-control" id="Email" value="{{obj.email}}">
                                                    </div>
                                                </div>
                            
                                         
                            
                                                <div class="text-center">
                                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                                </div>
                                            </form><!-- End Profile Edit Form -->
                
                                        </div>
                    
                                        <!-- -------Change pw-------------- -->
                                        <!-- <div class="tab-pane fade pt-3" id="profile-change-password">
                                            <form>
                        
                                            <div class="row mb-3">
                                                <label for="currentPassword" class="col-md-4 col-lg-3 col-form-label">Current Password</label>
                                                <div class="col-md-8 col-lg-9">
                                                <input name="password" type="password" class="form-control" id="currentPassword">
                                                </div>
                                            </div>
                        
                                            <div class="row mb-3">
                                                <label for="newPassword" class="col-md-4 col-lg-3 col-form-label">New Password</label>
                                                <div class="col-md-8 col-lg-9">
                                                <input name="newpassword" type="password" class="form-control" id="newPassword">
                                                </div>
                                            </div>
                        
                                            <div class="row mb-3">
                                                <label for="renewPassword" class="col-md-4 col-lg-3 col-form-label">Re-enter New Password</label>
                                                <div class="col-md-8 col-lg-9">
                                                <input name="renewpassword" type="password" class="form-control" id="renewPassword">
                                                </div>
                                            </div>
                        
                                            <div class="text-center">
                                                <button type="submit" class="btn btn-primary">Change Password</button>
                                            </div>
                                            </form>
                        
                                        </div> -->
                    
                                    </div>
                
                                </div>
                            </div>
                        </div>
                    </div>
                </section>


                 
                <!-- ----------My Friends list------------- -->
                <div class="bg-white rounded-lg shadow-xl p-8">
                    <div class="flex items-center justify-between">
                        <h4 class="text-xl text-gray-900 font-bold">Friends List</h4>
                        <a href="#" title="View All">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500 hover:text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
                            </svg>
                        </a>
                    </div>
                    
                    <div class="flex flex-row gap-20 mt-8">
                        {%if obj.get_friends_no != 0 %}
                            {% for friend in obj.get_friends %}
                                <a href="{% url 'profiles:profile-detail-view' friend.profile.pk %}" class="no-underline flex flex-col items-center justify-between text-gray-800 hover:text-[#1ab41a90]" title="View Profile">
                                    <img src="{{friend.profile.avatar.url}}" class="w-16 h-16 rounded-full">
                                    <p class="text-center font-bold text-sm mt-1">{{friend.profile.first_name}} {{friend.profile.last_name}}</p>
                                    <button type="button" class="btn btn-primary" style="background-color: #369273;">View profile</button>
                                </a>
                            {% endfor %}


                        {%else%}   
                            <div class="col-lg-9 col-md-8 text-gray-600">{{obj.get_friends_no}}</div>
                        {%endif%}
                         
                    </div>
                </div>


                 <!-- ----------My posts list------------- -->
                 <div class="bg-white rounded-lg shadow-xl p-8 border-t-2">
                    <div class="flex items-center justify-between">
                        <h4 class="text-xl text-gray-900 font-bold">My Post List</h4>
                        <a href="#" title="View All">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500 hover:text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
                            </svg>
                        </a>
                    </div>

                    <div class="flex flex-row flex-wrap gap-20 mt-8">

                    {%for myPost in obj.profiles_posts%}
                        <div id="default_posts" class="default_posts w-[300px] mb-10 bg-white shadow-2xl shadow-gray-800 rounded-2xl p-4">
                            <div class="flex justify-between">
                                <div class="flex items-start flex-col">
                                    <img src="{{myPost.author.avatar.url}}" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
                                    <p class="text-gray-500 text-sm">{{myPost.created_at}}</p>
                                </div>
                            </div>
                            <div class="border-b border-gray-300">
                                <p>{{myPost.content}}</p>
                                {% if mypost.post_img != 'None' %}
                                    <img src="{{myPost.post_img.url}}" alt="Post Image" class=" w-80 h-80 mt-1">    
                                {% endif %}
                            </div>   
                        </div>
                    {%endfor%}
                        
                       
                    </div>
                </div>

                


            </div>
      

            <!-- ------Active status------- -->
            <div class="z-0  active-statuss fixed top-40 right-0 w-[292px] m-4 rounded-2xl shadow-lg shadow-gray-400 bg-blue-500">
                <div class="bg-white shadow rounded-lg p-4">
                <div class="flex items-center mb-4">
                    <h4 class="font-semibold text-lg">Active Now</h4>
                    <span class="ml-2 bg-green-500 rounded-full w-3 h-3"></span>
                </div>
                
                    <img src="{% static 'img/me.jpg' %}" alt="User 1" class="w-8 h-8 rounded-full">
                    <img src="{% static 'img/me.jpg' %}" alt="User 2" class="w-8 h-8 rounded-full">
                    <img src="{% static 'img/me.jpg' %}" alt="User 3" class="w-8 h-8 rounded-full">
                    <img src="{% static 'img/me.jpg' %}" alt="User 4" class="w-8 h-8 rounded-full">
                    <img src="{% static 'img/me.jpg' %}" alt="User 5" class="w-8 h-8 rounded-full">
                    <img src="{% static 'img/me.jpg' %}" alt="User 6" class="w-8 h-8 rounded-full">
                    <img src="{% static 'img/me.jpg' %}" alt="User 7" class="w-8 h-8 rounded-full">
                    <img src="{% static 'img/me.jpg' %}" alt="User 8" class="w-8 h-8 rounded-full">
                </div>
            </div>

        </div>
    </div>

    


    
    <!-- Link to js -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script>  
        $(document).ready(function() {
            var messages = $('.messages');
            if(messages.length != 0){ 
                    console.log("Elements exist");
                    setTimeout(function(){
                        messages.hide();
                    }, 1200);
                }
            }
        ) 
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script src="{%static 'js/main.js' %}"></script>
    </body>
</html>
